# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –¥–ª—è –≥—Ä—É–ø–ø –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Kentos Dojo. –ö–∞–ª–µ–Ω–¥–∞—Ä—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –≥—Ä—É–ø–ø—ã –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞](#1-–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#2-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [Backend (Electron)](#3-backend-electron)
4. [Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#4-frontend-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞](#5-–¥–∏–∑–∞–π–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)
6. [–≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#6-—ç—Ç–∞–ø—ã-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### 1.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ò–∫–æ–Ω–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞—Ä—Ç–æ—á–∫—É –≥—Ä—É–ø–ø—ã (—Ä—è–¥–æ–º —Å –∏–∫–æ–Ω–∫–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è)
2. **–î–∏–∞–ª–æ–≥ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º** ‚Äî –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. **–ö–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è —Å–µ—Ç–∫–∞** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞, –¥–Ω–∏ —Å –∑–∞–Ω—è—Ç–∏—è–º–∏ –≤—ã–¥–µ–ª–µ–Ω—ã –∑–µ–ª–µ–Ω–æ–≤–∞—Ç—ã–º —Ü–≤–µ—Ç–æ–º
4. **–°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** ‚Äî —Å–ª–µ–≤–∞ –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã
5. **–û—Ç–º–µ—Ç–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏** ‚Äî –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∑–∞–Ω—è—Ç–∏—è:
   - ‚úÖ –ë—ã–ª (present) ‚Äî –∑–µ–ª—ë–Ω—ã–π
   - ‚ùå –ù–µ –±—ã–ª (absent) ‚Äî –∫—Ä–∞—Å–Ω—ã–π  
   - ü§í –ë–æ–ª–µ–ª (sick) ‚Äî –∂—ë–ª—Ç—ã–π

### 1.2 –ú–∞–∫–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ ‚Äî –ì—Ä—É–ø–ø–∞ "–î–µ—Ç–∏ 7-10 –ª–µ—Ç"         ‚óÄ –Ø–Ω–≤ 2026 ‚ñ∂‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ  –£—á–∞—Å—Ç–Ω–∏–∫–∏        ‚îÇ –ü–Ω  ‚îÇ –í—Ç  ‚îÇ –°—Ä  ‚îÇ –ß—Ç  ‚îÇ –ü—Ç  ‚îÇ –°–±  ‚îÇ –í—Å  ‚îÇ        ‚îÇ
‚îÇ                   ‚îÇ  6  ‚îÇ  7  ‚îÇ  8  ‚îÇ  9  ‚îÇ 10  ‚îÇ 11  ‚îÇ 12  ‚îÇ        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§        ‚îÇ
‚îÇ  –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω      ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ
‚îÇ  –ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è    ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ  ü§í ‚îÇ     ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ
‚îÇ  –°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π  ‚îÇ  ‚ùå ‚îÇ     ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ  ‚úÖ ‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ
‚îÇ  ...              ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  –õ–µ–≥–µ–Ω–¥–∞: ‚úÖ –ë—ã–ª  ‚ùå –ù–µ –±—ã–ª  ü§í –ë–æ–ª–µ–ª  [üü¢] –î–µ–Ω—å –∑–∞–Ω—è—Ç–∏—è             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

**–¢–∞–±–ª–∏—Ü–∞ `lessons`** ‚Äî –∑–∞–Ω—è—Ç–∏—è:
```sql
-- –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
CREATE TABLE lessons (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  group_id INTEGER NOT NULL,
  lesson_date DATE NOT NULL,        -- –î–∞—Ç–∞ –∑–∞–Ω—è—Ç–∏—è
  start_time TEXT NOT NULL,         -- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
  end_time TEXT NOT NULL,           -- –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  sync_status TEXT DEFAULT 'pending',
  FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE CASCADE
);
```

**–¢–∞–±–ª–∏—Ü–∞ `attendance`** ‚Äî –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å:
```sql
-- –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
CREATE TABLE attendance (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  lesson_id INTEGER NOT NULL,
  client_id INTEGER NOT NULL,
  status TEXT CHECK (status IN ('present', 'absent', 'sick') OR status IS NULL),
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  sync_status TEXT DEFAULT 'pending',
  FOREIGN KEY (lesson_id) REFERENCES lessons(id) ON DELETE CASCADE,
  FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
  UNIQUE(lesson_id, client_id)
);
```

**–¢–∞–±–ª–∏—Ü–∞ `group_members`** ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã:
```sql
-- –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
CREATE TABLE group_members (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  group_id INTEGER NOT NULL,
  client_id INTEGER NOT NULL,
  joined_at DATE DEFAULT CURRENT_DATE,
  sync_status TEXT DEFAULT 'pending',
  FOREIGN KEY (group_id) REFERENCES groups(id) ON DELETE CASCADE,
  FOREIGN KEY (client_id) REFERENCES clients(id) ON DELETE CASCADE,
  UNIQUE(group_id, client_id)
);
```

### 2.2 –ù–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```sql
-- –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã–±–æ—Ä–∫–∏ –∑–∞–Ω—è—Ç–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥
CREATE INDEX IF NOT EXISTS idx_lessons_group_date ON lessons(group_id, lesson_date);
```

---

## 3. Backend (Electron)

### 3.1 –ù–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `electron/database/queries/lessons.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π –≥—Ä—É–ø–ø—ã –∑–∞ –º–µ—Å—è—Ü
export const lessonQueries = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã ...

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –∑–∞–Ω—è—Ç–∏—è –≥—Ä—É–ø–ø—ã –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü
   */
  getByGroupAndMonth(groupId: number, year: number, month: number): LessonWithDetails[] {
    const db = getDatabase()
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞
    const startDate = `${year}-${String(month).padStart(2, '0')}-01`
    const lastDay = new Date(year, month, 0).getDate()
    const endDate = `${year}-${String(month).padStart(2, '0')}-${String(lastDay).padStart(2, '0')}`
    
    return db.prepare(`
      SELECT 
        l.*,
        g.name as group_name,
        e.full_name as trainer_name,
        (SELECT COUNT(*) FROM attendance WHERE lesson_id = l.id AND status = 'present') as attendance_count,
        (SELECT COUNT(*) FROM group_members WHERE group_id = l.group_id) as total_members
      FROM lessons l
      JOIN groups g ON l.group_id = g.id
      LEFT JOIN employees e ON g.trainer_id = e.id
      WHERE l.group_id = ? AND l.lesson_date BETWEEN ? AND ?
      ORDER BY l.lesson_date ASC, l.start_time ASC
    `).all(groupId, startDate, endDate) as LessonWithDetails[]
  },

  /**
   * –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã –∑–∞ –º–µ—Å—è—Ü
   * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: { lessons: [], members: [], attendance: { lessonId: { clientId: status } } }
   */
  getGroupAttendanceMatrix(groupId: number, year: number, month: number): {
    lessons: LessonWithDetails[]
    members: { client_id: number; client_name: string; client_phone: string | null }[]
    attendance: Record<number, Record<number, 'present' | 'absent' | 'sick' | null>>
  } {
    const db = getDatabase()
    
    // –ü–æ–ª—É—á–∞–µ–º –∑–∞–Ω—è—Ç–∏—è –∑–∞ –º–µ—Å—è—Ü
    const lessons = this.getByGroupAndMonth(groupId, year, month)
    
    // –ü–æ–ª—É—á–∞–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã
    const members = db.prepare(`
      SELECT gm.client_id, c.full_name as client_name, c.phone as client_phone
      FROM group_members gm
      JOIN clients c ON c.id = gm.client_id
      WHERE gm.group_id = ?
      ORDER BY c.full_name
    `).all(groupId) as { client_id: number; client_name: string; client_phone: string | null }[]
    
    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∑–∞ —ç—Ç–∏ –∑–∞–Ω—è—Ç–∏—è
    const lessonIds = lessons.map(l => l.id)
    
    if (lessonIds.length === 0) {
      return { lessons, members, attendance: {} }
    }
    
    const placeholders = lessonIds.map(() => '?').join(',')
    const attendanceRecords = db.prepare(`
      SELECT lesson_id, client_id, status
      FROM attendance
      WHERE lesson_id IN (${placeholders})
    `).all(...lessonIds) as { lesson_id: number; client_id: number; status: 'present' | 'absent' | 'sick' | null }[]
    
    // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Ç—Ä–∏—Ü—É –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
    const attendance: Record<number, Record<number, 'present' | 'absent' | 'sick' | null>> = {}
    
    for (const record of attendanceRecords) {
      if (!attendance[record.lesson_id]) {
        attendance[record.lesson_id] = {}
      }
      attendance[record.lesson_id][record.client_id] = record.status
    }
    
    return { lessons, members, attendance }
  }
}
```

### 3.2 –ù–æ–≤—ã–µ IPC Handlers

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `electron/main.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ handlers –≤ setupIpcHandlers():

// Calendar attendance
ipcMain.handle('db:lessons:getByGroupAndMonth', (_, groupId, year, month) => 
  lessonQueries.getByGroupAndMonth(groupId, year, month))
  
ipcMain.handle('db:lessons:getGroupAttendanceMatrix', (_, groupId, year, month) => 
  lessonQueries.getGroupAttendanceMatrix(groupId, year, month))
```

### 3.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API —Ñ—É–Ω–∫—Ü–∏–π

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/lib/api.ts`

```typescript
export const lessonsApi = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã ...

  // –ü–æ–ª—É—á–∏—Ç—å –∑–∞–Ω—è—Ç–∏—è –≥—Ä—É–ø–ø—ã –∑–∞ –º–µ—Å—è—Ü
  getByGroupAndMonth: (groupId: number, year: number, month: number) =>
    window.electronAPI.db.query('lessons:getByGroupAndMonth', groupId, year, month),

  // –ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã –∑–∞ –º–µ—Å—è—Ü
  getGroupAttendanceMatrix: (groupId: number, year: number, month: number) =>
    window.electronAPI.db.query('lessons:getGroupAttendanceMatrix', groupId, year, month),
}
```

---

## 4. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 4.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ groups/
‚îÇ       ‚îú‚îÄ‚îÄ GroupsList.tsx              # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ       ‚îú‚îÄ‚îÄ GroupCalendarDialog.tsx     # –ù–û–í–´–ô: –¥–∏–∞–ª–æ–≥ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º
‚îÇ       ‚îî‚îÄ‚îÄ AttendanceCalendar.tsx      # –ù–û–í–´–ô: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π —Å–µ—Ç–∫–∏
```

### 4.2 –¢–∏–ø—ã TypeScript

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/types/index.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã

export interface GroupAttendanceMatrix {
  lessons: Lesson[]
  members: {
    client_id: number
    client_name: string
    client_phone: string | null
  }[]
  attendance: Record<number, Record<number, AttendanceStatus>>
}

export interface CalendarDay {
  date: Date
  dayOfMonth: number
  isCurrentMonth: boolean
  lessons: Lesson[]
}
```

### 4.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ GroupsList

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/components/groups/GroupsList.tsx`

```tsx
import type { Group } from '@/types'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Users, User, Pencil, Trash2, ChevronRight, Calendar } from 'lucide-react'
import { useNavigate } from 'react-router-dom'
import { useState } from 'react'
import { GroupCalendarDialog } from './GroupCalendarDialog'

interface GroupsListProps {
  groups: Group[]
  onEdit: (group: Group) => void
  onDelete: (group: Group) => void
}

export function GroupsList({ groups, onEdit, onDelete }: GroupsListProps) {
  const navigate = useNavigate()
  const [calendarGroup, setCalendarGroup] = useState<Group | null>(null)

  if (groups.length === 0) {
    return (
      <div className="text-center py-12 text-slate-500">
        <Users className="w-12 h-12 mx-auto mb-4 text-slate-300" />
        <p>–ù–µ—Ç –≥—Ä—É–ø–ø</p>
        <p className="text-sm mt-1">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –≥—Ä—É–ø–ø—É</p>
      </div>
    )
  }

  return (
    <>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {groups.map((group) => (
          <Card 
            key={group.id} 
            className="cursor-pointer hover:shadow-md transition-shadow"
            onClick={() => navigate(`/groups/${group.id}`)}
          >
            <CardHeader className="pb-2">
              <div className="flex items-start justify-between">
                <CardTitle className="text-lg">{group.name}</CardTitle>
                <div className="flex gap-1" onClick={(e) => e.stopPropagation()}>
                  {/* –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è */}
                  <Button 
                    variant="ghost" 
                    size="icon" 
                    onClick={() => setCalendarGroup(group)}
                    title="–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏"
                  >
                    <Calendar className="w-4 h-4" />
                  </Button>
                  <Button variant="ghost" size="icon" onClick={() => onEdit(group)}>
                    <Pencil className="w-4 h-4" />
                  </Button>
                  <Button 
                    variant="ghost" 
                    size="icon"
                    className="text-red-500 hover:text-red-600"
                    onClick={() => onDelete(group)}
                  >
                    <Trash2 className="w-4 h-4" />
                  </Button>
                </div>
              </div>
            </CardHeader>
            <CardContent>
              <div className="flex items-center gap-4 text-sm text-slate-600">
                <div className="flex items-center gap-1">
                  <Users className="w-4 h-4" />
                  <span>{group.member_count || 0} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                </div>
                {group.trainer_name && (
                  <div className="flex items-center gap-1">
                    <User className="w-4 h-4" />
                    <span>{group.trainer_name}</span>
                  </div>
                )}
              </div>
              
              <div className="flex items-center justify-between mt-4">
                <Badge variant="secondary">
                  {group.start_date || '–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞'}
                </Badge>
                <ChevronRight className="w-4 h-4 text-slate-400" />
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      {/* –î–∏–∞–ª–æ–≥ –∫–∞–ª–µ–Ω–¥–∞—Ä—è */}
      <GroupCalendarDialog
        open={!!calendarGroup}
        onOpenChange={(open) => !open && setCalendarGroup(null)}
        group={calendarGroup}
      />
    </>
  )
}
```

### 4.4 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–∏–∞–ª–æ–≥–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `src/components/groups/GroupCalendarDialog.tsx`

```tsx
import { useState, useEffect } from 'react'
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog'
import { Button } from '@/components/ui/button'
import { ChevronLeft, ChevronRight } from 'lucide-react'
import { AttendanceCalendar } from './AttendanceCalendar'
import { lessonsApi } from '@/lib/api'
import type { Group, GroupAttendanceMatrix } from '@/types'

interface GroupCalendarDialogProps {
  open: boolean
  onOpenChange: (open: boolean) => void
  group: Group | null
}

const MONTH_NAMES = [
  '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
  '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
]

export function GroupCalendarDialog({ open, onOpenChange, group }: GroupCalendarDialogProps) {
  const today = new Date()
  const [year, setYear] = useState(today.getFullYear())
  const [month, setMonth] = useState(today.getMonth() + 1) // 1-12
  const [data, setData] = useState<GroupAttendanceMatrix | null>(null)
  const [isLoading, setIsLoading] = useState(false)

  // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–ª–∏ —Å–º–µ–Ω–µ –º–µ—Å—è—Ü–∞
  useEffect(() => {
    if (open && group) {
      loadData()
    }
  }, [open, group, year, month])

  const loadData = async () => {
    if (!group) return
    setIsLoading(true)
    try {
      const result = await lessonsApi.getGroupAttendanceMatrix(group.id, year, month) as GroupAttendanceMatrix
      setData(result)
    } catch (error) {
      console.error('Error loading attendance matrix:', error)
    } finally {
      setIsLoading(false)
    }
  }

  const handlePrevMonth = () => {
    if (month === 1) {
      setMonth(12)
      setYear(year - 1)
    } else {
      setMonth(month - 1)
    }
  }

  const handleNextMonth = () => {
    if (month === 12) {
      setMonth(1)
      setYear(year + 1)
    } else {
      setMonth(month + 1)
    }
  }

  if (!group) return null

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-[900px] max-h-[90vh] overflow-hidden flex flex-col">
        <DialogHeader>
          <div className="flex items-center justify-between">
            <DialogTitle>–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ ‚Äî {group.name}</DialogTitle>
            
            {/* –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º */}
            <div className="flex items-center gap-2">
              <Button variant="ghost" size="icon" onClick={handlePrevMonth}>
                <ChevronLeft className="w-4 h-4" />
              </Button>
              <span className="font-medium min-w-[140px] text-center">
                {MONTH_NAMES[month - 1]} {year}
              </span>
              <Button variant="ghost" size="icon" onClick={handleNextMonth}>
                <ChevronRight className="w-4 h-4" />
              </Button>
            </div>
          </div>
        </DialogHeader>

        <div className="flex-1 overflow-auto">
          {isLoading ? (
            <div className="flex items-center justify-center py-12">
              <p className="text-slate-500">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
          ) : data ? (
            <AttendanceCalendar
              year={year}
              month={month}
              lessons={data.lessons}
              members={data.members}
              attendance={data.attendance}
              onAttendanceChange={loadData}
            />
          ) : (
            <div className="flex items-center justify-center py-12">
              <p className="text-slate-500">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>
            </div>
          )}
        </div>

        {/* –õ–µ–≥–µ–Ω–¥–∞ */}
        <div className="flex items-center gap-4 pt-4 border-t text-sm text-slate-600">
          <span className="font-medium">–õ–µ–≥–µ–Ω–¥–∞:</span>
          <div className="flex items-center gap-1">
            <span className="w-5 h-5 rounded bg-green-100 flex items-center justify-center text-green-600 text-xs">‚úì</span>
            <span>–ë—ã–ª</span>
          </div>
          <div className="flex items-center gap-1">
            <span className="w-5 h-5 rounded bg-red-100 flex items-center justify-center text-red-600 text-xs">‚úó</span>
            <span>–ù–µ –±—ã–ª</span>
          </div>
          <div className="flex items-center gap-1">
            <span className="w-5 h-5 rounded bg-yellow-100 flex items-center justify-center text-yellow-600 text-xs">ü§í</span>
            <span>–ë–æ–ª–µ–ª</span>
          </div>
          <div className="flex items-center gap-1">
            <span className="w-5 h-5 rounded bg-emerald-50 border border-emerald-200"></span>
            <span>–î–µ–Ω—å –∑–∞–Ω—è—Ç–∏—è</span>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  )
}
```

### 4.5 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–π —Å–µ—Ç–∫–∏

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `src/components/groups/AttendanceCalendar.tsx`

```tsx
import { useMemo } from 'react'
import { Button } from '@/components/ui/button'
import {
  Popover,
  PopoverContent,
  PopoverTrigger,
} from '@/components/ui/popover'
import { Check, X, ThermometerSun, HelpCircle } from 'lucide-react'
import { cn } from '@/lib/utils'
import { lessonsApi, attendanceApi } from '@/lib/api'
import { toast } from 'sonner'
import type { Lesson, AttendanceStatus } from '@/types'

interface AttendanceCalendarProps {
  year: number
  month: number // 1-12
  lessons: Lesson[]
  members: { client_id: number; client_name: string; client_phone: string | null }[]
  attendance: Record<number, Record<number, AttendanceStatus>>
  onAttendanceChange: () => void
}

const STATUS_OPTIONS: { value: AttendanceStatus; label: string; icon: React.ReactNode; bgColor: string; textColor: string }[] = [
  { value: 'present', label: '–ë—ã–ª', icon: <Check className="w-3 h-3" />, bgColor: 'bg-green-100', textColor: 'text-green-600' },
  { value: 'absent', label: '–ù–µ –±—ã–ª', icon: <X className="w-3 h-3" />, bgColor: 'bg-red-100', textColor: 'text-red-600' },
  { value: 'sick', label: '–ë–æ–ª–µ–ª', icon: <ThermometerSun className="w-3 h-3" />, bgColor: 'bg-yellow-100', textColor: 'text-yellow-600' },
  { value: null, label: '–ù–µ –æ—Ç–º–µ—á–µ–Ω', icon: <HelpCircle className="w-3 h-3" />, bgColor: 'bg-slate-100', textColor: 'text-slate-400' },
]

export function AttendanceCalendar({
  year,
  month,
  lessons,
  members,
  attendance,
  onAttendanceChange
}: AttendanceCalendarProps) {
  
  // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞ —Å –∑–∞–Ω—è—Ç–∏—è–º–∏
  const calendarData = useMemo(() => {
    const daysInMonth = new Date(year, month, 0).getDate()
    const firstDayOfWeek = (new Date(year, month - 1, 1).getDay() + 6) % 7 // –ü–Ω = 0
    
    // –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç—É –∑–∞–Ω—è—Ç–∏–π –ø–æ –¥–Ω—è–º
    const lessonsByDay: Record<number, Lesson[]> = {}
    for (const lesson of lessons) {
      const day = parseInt(lesson.lesson_date.split('-')[2])
      if (!lessonsByDay[day]) {
        lessonsByDay[day] = []
      }
      lessonsByDay[day].push(lesson)
    }
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–Ω–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const days: { day: number; lessons: Lesson[]; isLessonDay: boolean }[] = []
    
    for (let day = 1; day <= daysInMonth; day++) {
      const dayLessons = lessonsByDay[day] || []
      days.push({
        day,
        lessons: dayLessons,
        isLessonDay: dayLessons.length > 0
      })
    }
    
    return { days, firstDayOfWeek, daysInMonth }
  }, [year, month, lessons])

  // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
  const getStatus = (lessonId: number, clientId: number): AttendanceStatus => {
    return attendance[lessonId]?.[clientId] ?? null
  }

  // –ü–æ–ª—É—á–∞–µ–º –∏–∫–æ–Ω–∫—É –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
  const getStatusDisplay = (status: AttendanceStatus) => {
    const option = STATUS_OPTIONS.find(o => o.value === status) || STATUS_OPTIONS[3]
    return (
      <span className={cn('w-5 h-5 rounded flex items-center justify-center', option.bgColor, option.textColor)}>
        {option.icon}
      </span>
    )
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
  const handleStatusChange = async (lessonId: number, clientId: number, status: AttendanceStatus) => {
    try {
      await attendanceApi.updateStatus(lessonId, clientId, status)
      onAttendanceChange()
      toast.success('–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞')
    } catch (error) {
      toast.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è')
    }
  }

  // –¢–æ–ª—å–∫–æ –¥–Ω–∏ —Å –∑–∞–Ω—è—Ç–∏—è–º–∏
  const lessonDays = calendarData.days.filter(d => d.isLessonDay)

  if (lessonDays.length === 0) {
    return (
      <div className="text-center py-12 text-slate-500">
        <p>–ù–µ—Ç –∑–∞–Ω—è—Ç–∏–π –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</p>
        <p className="text-sm mt-1">–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∑–∞–Ω—è—Ç–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ó–∞–Ω—è—Ç–∏—è"</p>
      </div>
    )
  }

  if (members.length === 0) {
    return (
      <div className="text-center py-12 text-slate-500">
        <p>–ù–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –≥—Ä—É–ø–ø–µ</p>
      </div>
    )
  }

  return (
    <div className="overflow-auto">
      <table className="w-full border-collapse text-sm">
        <thead>
          <tr className="bg-slate-50">
            <th className="sticky left-0 bg-slate-50 border border-slate-200 p-2 text-left min-w-[200px] z-10">
              –£—á–∞—Å—Ç–Ω–∏–∫
            </th>
            {lessonDays.map((dayData) => (
              <th
                key={dayData.day}
                className={cn(
                  'border border-slate-200 p-2 text-center min-w-[60px]',
                  'bg-emerald-50 border-emerald-200'
                )}
              >
                <div className="font-medium">{dayData.day}</div>
                <div className="text-xs text-slate-500 font-normal">
                  {dayData.lessons[0]?.start_time?.slice(0, 5)}
                </div>
              </th>
            ))}
          </tr>
        </thead>
        <tbody>
          {members.map((member) => (
            <tr key={member.client_id} className="hover:bg-slate-50">
              <td className="sticky left-0 bg-white border border-slate-200 p-2 z-10">
                <div className="font-medium truncate">{member.client_name}</div>
                {member.client_phone && (
                  <div className="text-xs text-slate-500">{member.client_phone}</div>
                )}
              </td>
              {lessonDays.map((dayData) => {
                const lesson = dayData.lessons[0] // –ë–µ—Ä—ë–º –ø–µ—Ä–≤–æ–µ –∑–∞–Ω—è—Ç–∏–µ –¥–Ω—è
                const status = getStatus(lesson.id, member.client_id)
                
                return (
                  <td
                    key={dayData.day}
                    className="border border-slate-200 p-1 text-center bg-emerald-50/50"
                  >
                    <Popover>
                      <PopoverTrigger asChild>
                        <Button
                          variant="ghost"
                          size="sm"
                          className="w-full h-8 p-0 hover:bg-slate-100"
                        >
                          {getStatusDisplay(status)}
                        </Button>
                      </PopoverTrigger>
                      <PopoverContent className="w-40 p-1">
                        {STATUS_OPTIONS.map((option) => (
                          <Button
                            key={option.value ?? 'null'}
                            variant="ghost"
                            size="sm"
                            className="w-full justify-start gap-2"
                            onClick={() => handleStatusChange(lesson.id, member.client_id, option.value)}
                          >
                            <span className={cn('w-5 h-5 rounded flex items-center justify-center', option.bgColor, option.textColor)}>
                              {option.icon}
                            </span>
                            {option.label}
                          </Button>
                        ))}
                      </PopoverContent>
                    </Popover>
                  </td>
                )
              })}
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  )
}
```

### 4.6 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –¥–ª—è –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏

**–û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª:** `src/lib/api.ts`

```typescript
// –î–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å attendanceApi
export const attendanceApi = {
  getByLesson: (lessonId: number) => 
    window.electronAPI.db.query('attendance:getByLesson', lessonId),
  
  updateStatus: (lessonId: number, clientId: number, status: AttendanceStatus) =>
    window.electronAPI.db.query('attendance:updateStatus', lessonId, clientId, status),
  
  getClientAttendance: (clientId: number, startDate?: string, endDate?: string) =>
    window.electronAPI.db.query('attendance:getClientAttendance', clientId, startDate, endDate),
}
```

---

## 5. –î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### 5.1 –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

| –≠–ª–µ–º–µ–Ω—Ç | –¶–≤–µ—Ç | –ö–ª–∞—Å—Å Tailwind |
|---------|------|----------------|
| –î–µ–Ω—å —Å –∑–∞–Ω—è—Ç–∏–µ–º (—Ñ–æ–Ω) | –°–≤–µ—Ç–ª–æ-–∏–∑—É–º—Ä—É–¥–Ω—ã–π | `bg-emerald-50` |
| –î–µ–Ω—å —Å –∑–∞–Ω—è—Ç–∏–µ–º (–≥—Ä–∞–Ω–∏—Ü–∞) | –ò–∑—É–º—Ä—É–¥–Ω—ã–π | `border-emerald-200` |
| –°—Ç–∞—Ç—É—Å "–ë—ã–ª" | –ó–µ–ª—ë–Ω—ã–π | `bg-green-100 text-green-600` |
| –°—Ç–∞—Ç—É—Å "–ù–µ –±—ã–ª" | –ö—Ä–∞—Å–Ω—ã–π | `bg-red-100 text-red-600` |
| –°—Ç–∞—Ç—É—Å "–ë–æ–ª–µ–ª" | –ñ—ë–ª—Ç—ã–π | `bg-yellow-100 text-yellow-600` |
| –ù–µ –æ—Ç–º–µ—á–µ–Ω | –°–µ—Ä—ã–π | `bg-slate-100 text-slate-400` |
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã | –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π | `bg-slate-50` |

### 5.2 –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

- **Desktop (>900px)**: –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- **Tablet (600-900px)**: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
- **Mobile (<600px)**: –î–∏–∞–ª–æ–≥ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

### 5.3 UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Sticky –ø–µ—Ä–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞** ‚Äî –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –∏–º–µ–Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏
2. **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –¥–Ω–µ–π –∑–∞–Ω—è—Ç–∏–π** ‚Äî –∑–µ–ª–µ–Ω–æ–≤–∞—Ç—ã–π —Ñ–æ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
3. **Popover –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞** ‚Äî –±—ã—Å—Ç—Ä–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω—è—Ç–∏—è** ‚Äî –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
5. **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º** ‚Äî –∫–Ω–æ–ø–∫–∏ "–ø—Ä–µ–¥—ã–¥—É—â–∏–π/—Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü"

---

## 6. –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: Backend ‚Äî –∑–∞–ø—Ä–æ—Å—ã –∏ API (2-3 —á–∞—Å–∞)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getByGroupAndMonth` –≤ `lessonQueries`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `getGroupAttendanceMatrix` –≤ `lessonQueries`
- [ ] –î–æ–±–∞–≤–∏—Ç—å IPC handlers –≤ `main.ts`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `src/lib/api.ts`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ DevTools

### –≠—Ç–∞–ø 2: Frontend ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (3-4 —á–∞—Å–∞)

- [ ] –°–æ–∑–¥–∞—Ç—å `GroupCalendarDialog.tsx`
- [ ] –°–æ–∑–¥–∞—Ç—å `AttendanceCalendar.tsx`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤ `src/types/index.ts`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `GroupsList.tsx` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 —á–∞—Å–∞)

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∏–∫–æ–Ω–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –∑–∞ —Ä–∞–∑–Ω—ã–µ –º–µ—Å—è—Ü—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–Ω–µ—Ç –∑–∞–Ω—è—Ç–∏–π, –Ω–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)

### –≠—Ç–∞–ø 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI (1-2 —á–∞—Å–∞)

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–≤–µ—Ç–∞ –∏ –æ—Ç—Å—Ç—É–ø—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–µ–≥–µ–Ω–¥—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

---

## üìÅ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
electron/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îî‚îÄ‚îÄ queries/
‚îÇ       ‚îî‚îÄ‚îÄ lessons.ts              # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îú‚îÄ‚îÄ main.ts                         # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å IPC handlers

src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ groups/
‚îÇ       ‚îú‚îÄ‚îÄ GroupsList.tsx          # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å –∏–∫–æ–Ω–∫—É –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ       ‚îú‚îÄ‚îÄ GroupCalendarDialog.tsx # –ù–û–í–´–ô: –¥–∏–∞–ª–æ–≥ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ       ‚îî‚îÄ‚îÄ AttendanceCalendar.tsx  # –ù–û–í–´–ô: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–∞–±–ª–∏—Ü—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ api.ts                      # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ API
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ index.ts                    # –û–ë–ù–û–í–ò–¢–¨: –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã
```

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

1. ‚úÖ –í –∫–∞—Ä—Ç–æ—á–∫–µ –≥—Ä—É–ø–ø—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–∫–æ–Ω–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
2. ‚úÖ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä—ë–º –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏
3. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø—ã —Å–ª–µ–≤–∞
4. ‚úÖ –î–Ω–∏ —Å –∑–∞–Ω—è—Ç–∏—è–º–∏ –≤—ã–¥–µ–ª–µ–Ω—ã –∑–µ–ª–µ–Ω–æ–≤–∞—Ç—ã–º —Ü–≤–µ—Ç–æ–º
5. ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–µ—Å—è—Ü–∞–º–∏
6. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å—ã –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ (–±—ã–ª/–Ω–µ –±—ã–ª/–±–æ–ª–µ–ª)
7. ‚úÖ –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∫–ª–∏–∫–æ–º
8. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
9. ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–∏–≤–µ–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–∞

---

## üîÑ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–Ω–∞ –±—É–¥—É—â–µ–µ)

1. **–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel** ‚Äî –≤—ã–≥—Ä—É–∑–∫–∞ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
3. **–ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–º–µ—Ç–∫–∞** ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö –∫–∞–∫ "–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª"
4. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** ‚Äî –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
5. **–ü–µ—á–∞—Ç—å** ‚Äî –≤–µ—Ä—Å–∏—è –¥–ª—è –ø–µ—á–∞—Ç–∏
6. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –º–µ—Å—è—Ü–∞–º

